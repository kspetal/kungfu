"use strict";const t=require("../../common/vendor.js"),e=require("../../services/api.js"),s={data:()=>({id:"",student:{},defaultAvatar:"/static/logo.png"}),onLoad(t){this.id=t.id,this.loadDetail()},methods:{loadDetail(){const t=getApp(),e=(t&&t.$store&&t.$store.state.students||[]).find((t=>String(t.id)===String(this.id)));e&&(this.student=e)},goEdit(){t.index.navigateTo({url:`/pages/student-form/index?id=${this.id}`})},goPayments(){t.index.navigateTo({url:`/pages/student-form/index?id=${this.id}&tab=payments`})},handleDelete(){t.index.showModal({title:"删除确认",content:"确定要删除该学员及其相关记录吗？",success:async s=>{if(s.confirm)try{await e.deleteStudent(this.id),t.index.showToast({title:"已删除",icon:"success"}),setTimeout((()=>{t.index.navigateBack()}),500)}catch(n){console.error("delete error",n),t.index.showToast({title:"删除失败",icon:"none"})}}})}}};const n=t._export_sfc(s,[["render",function(e,s,n,d,a,o){return{a:a.student.avatarUrl||a.defaultAvatar,b:t.t(a.student.name),c:t.t("ongoing"===a.student.status?"进行中":"已完成"),d:t.n("ongoing"===a.student.status?"status-ongoing":"status-completed"),e:t.t(a.student.project),f:t.t(a.student.endDate),g:t.t(a.student.parentPhone||"-"),h:t.t(a.student.parentWechat||"-"),i:t.t(a.student.address||"-"),j:t.t(a.student.project),k:t.t(a.student.cardType||"-"),l:t.t(a.student.startDate),m:t.t(a.student.endDate),n:t.t(a.student.remainingLessons||0),o:t.t(a.student.totalLessons||0),p:t.t(a.student.tuition||0),q:t.t(a.student.deposit||0),r:t.t(a.student.totalPaid||0),s:t.t(a.student.remark1||"-"),t:t.t(a.student.remark2||"-"),v:t.o(((...t)=>o.goPayments&&o.goPayments(...t))),w:t.o(((...t)=>o.goEdit&&o.goEdit(...t))),x:t.o(((...t)=>o.handleDelete&&o.handleDelete(...t)))}}],["__scopeId","data-v-69db5144"]]);wx.createPage(n);
